diff --git a/pygments/util.py b/pygments/util.py
index ac9babc..9254976 100644
--- a/pygments/util.py
+++ b/pygments/util.py
@@ -108,10 +108,16 @@ def make_analysator(f):
     returns float values.
     """
     def text_analyse(text):
-        rv = f(text)
+        try:
+            rv = f(text)
+        except Exception:
+            return 0.0
         if not rv:
             return 0.0
-        return min(1.0, max(0.0, float(rv)))
+        try:
+            return min(1.0, max(0.0, float(rv)))
+        except (ValueError, TypeError):
+            return 0.0
     text_analyse.__doc__ = f.__doc__
     return staticmethod(text_analyse)
 
